<div class="row py-5 px-5">
  <div class="col-sm-12 col-lg-4">
    <h4>Add Product</h4>
    <form [formGroup]="productForm" (ngSubmit)="onSubmitProduct()">
      <div class="form-group">
        <label for="name">Product Name </label>
        <input
          id="name"
          type="text"
          formControlName="name"
          class="form-control"
        />
        <small *ngIf="productForm.get('name').invalid && productForm.get('name').touched" class="text-danger">Required</small>
      </div>

      <div class="form-group">
        <label for="desctiption"> Product Description </label>
        <textarea
          name="desctiption"
          id="desctiption"
          cols="30"
          rows="5"
          formControlName="desctiption"
          class="form-control"
        ></textarea>
        <small *ngIf="productForm.get('desctiption').invalid && productForm.get('desctiption').touched" class="text-danger">Required</small>
      </div>

      <div class="form-group">
        <label for="price">Product Price </label>
        <input
          id="price"
          type="number"
          formControlName="price"
          class="form-control"
        />
        <small *ngIf="productForm.get('price').invalid && productForm.get('price').touched" class="text-danger">Required</small>
      </div>

      <div class="form-group">
        <label for="quantity">Product Quantity </label>
        <input
          id="quantity"
          type="number"
          formControlName="quantity"
          class="form-control"
        />
        <small *ngIf="productForm.get('quantity').invalid && productForm.get('quantity').touched" class="text-danger">Required</small>
      </div>

      <div class="form-group">
        <label for="category">Example select</label>
        <select class="form-control" id="category" formControlName="category">
          <option *ngFor="let category of categoryArray;" [ngValue]="category.categoryId">{{category.categoryName}}</option>
        </select>
      </div>

      <button type="submit" class="btn btn-primary mt-2">Submit</button>
    </form>
  </div>
  <div class="col-sm-12 col-lg-8">
    <h4>Products</h4>
    <div class="row">
        <div class="col-sm-4" *ngFor="let product of productsArray;">
            <div class="card">
                <div class="card-body">
                    <p class="card-text">
                        <span>Name:</span>
                        <span>{{product.productName}}</span>
                    </p>
                    <p class="card-text">
                        <span>Description:</span>
                        <span>{{product.productDescription}}</span>
                    </p>
                    <p class="card-text">
                        <span>Price:</span>
                        <span>{{product.productPrice}}</span>
                    </p>
                    <p class="card-text">
                        <span>Quantity:</span>
                        <span>{{product.productQuantity}}</span>
                    </p>
                    <p class="card-text">
                        <span>Category:</span>
                        <span>{{product.categoryId}}</span>
                    </p>
                </div>
                <div class="card-footer">
                    <div class="row">
                        <div class="col">
                            <button type="button" class="btn btn-sm btn-warning mr-2" (click)="openModal(template);editProduct(product.productId)"><i class="far fa-edit"></i></button>
                        </div>
                        <div class="col">
                            <button type="button" class="btn btn-sm btn-danger" (click)="deleteProduct(product.productId)"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </div>
</div>

<!-- Edit Modal -->
<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Edit Product</h4>
    <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
      <span aria-hidden="true" class="visually-hidden">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form [formGroup]="editProductForm" (ngSubmit)="onSubmitEditedProduct()">
      <div class="form-group">
        <label for="name">Product Name </label>
        <input
          id="name"
          type="text"
          formControlName="name"
          class="form-control"
        />
        <small *ngIf="editProductForm.get('name').invalid && editProductForm.get('name').touched" class="text-danger">Required</small>
      </div>

      <div class="form-group">
        <label for="desctiption"> Product Description </label>
        <textarea
          name="desctiption"
          id="desctiption"
          cols="30"
          rows="5"
          formControlName="desctiption"
          class="form-control"
        ></textarea>
        <small *ngIf="editProductForm.get('desctiption').invalid && editProductForm.get('desctiption').touched" class="text-danger">Required</small>
      </div>

      <div class="form-group">
        <label for="price">Product Price </label>
        <input
          id="price"
          type="number"
          formControlName="price"
          class="form-control"
        />
        <small *ngIf="editProductForm.get('price').invalid && editProductForm.get('price').touched" class="text-danger">Required</small>
      </div>

      <div class="form-group">
        <label for="quantity">Product Quantity </label>
        <input
          id="quantity"
          type="number"
          formControlName="quantity"
          class="form-control"
        />
        <small *ngIf="editProductForm.get('quantity').invalid && editProductForm.get('quantity').touched" class="text-danger">Required</small>
      </div>

      <div class="form-group">
        <label for="category">Example select</label>
        <select class="form-control" id="category" formControlName="category">
          <option *ngFor="let category of categoryArray;" [ngValue]="category.categoryId">{{category.categoryName}}</option>
        </select>
      </div>

      <button type="submit" class="btn btn-primary mt-2">Submit</button>
    </form>
  </div>
</ng-template>
